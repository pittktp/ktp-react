{"ast":null,"code":"var _jsxFileName = \"E:\\\\Webpage\\\\KTP\\\\ktp-react\\\\src\\\\views\\\\layouts\\\\KTPHeader.js\";\n// Packages\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux'; // React Bootstrap\n\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport NavDropdown from 'react-bootstrap/NavDropdown';\nimport Table from 'react-bootstrap/Table'; // Custom\n\nimport Api from '../../services/KTPApi';\nimport actions from '../../redux/auth/actions';\nimport logo from '../../img/KtpNavLogo.png';\nimport '../../styles/Header.css';\n\nfunction KTPHeader(props) {\n  const [bg, setBg] = useState('transparent');\n  const [members, setMembers] = useState([]);\n  const [notHere, setNotHere] = useState([]);\n  const [reloadMembers, setReloadMembers] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const navStyle = {\n    backgroundColor: bg\n  };\n  const dividerStyle = {\n    height: '100%',\n    width: 2,\n    borderLeft: '1px solid white'\n  };\n  useEffect(() => {\n    // call api to get members\n    if (props.isAuthenticated && reloadMembers) {\n      Api.getMembers().then(data => {\n        setMembers(data.members);\n        setReloadMembers(false);\n      });\n    }\n\n    document.addEventListener('scroll', () => {\n      setBg(window.scrollY < 75 ? 'transparent' : '#154360');\n    });\n  }, [props.isAuthenticated, reloadMembers]);\n\n  const handleLogout = () => {\n    props.logout();\n    props.history.push('/');\n  };\n\n  const handleClose = () => {\n    // Close Modal and Reset Data\n    setShowModal(false);\n    setNotHere([]);\n    setReloadMembers(true);\n  };\n\n  const handleSubmit = () => {\n    let payload = {\n      absent: notHere\n    };\n    Api.sendAttendence(payload).then(data => {\n      if (data.result === 'success') {\n        handleClose();\n      }\n    });\n  };\n\n  const handleNotHere = (member, index) => {\n    // Add Member To Not Here List\n    let membersNotHere = [...notHere, member._id];\n    setNotHere(membersNotHere); // Remove Member From Attendence List\n\n    let members_update = [...members];\n    members_update.splice(index, 1);\n    setMembers(members_update);\n  };\n\n  const navigate = path => {\n    props.history.push(path);\n  };\n\n  let authContent = props.isAuthenticated && props.member ? /*#__PURE__*/React.createElement(NavDropdown, {\n    title: props.member.name.toUpperCase(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavDropdown.Item, {\n    onClick: () => navigate(`/profile/${props.member.email.split('@')[0]}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \"My Profile\"), /*#__PURE__*/React.createElement(NavDropdown.Item, {\n    onClick: () => navigate('/points'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"View/Log Points\"), props.member.admin && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavDropdown.Item, {\n    onClick: () => navigate('/edit-members'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"Edit Members\"), /*#__PURE__*/React.createElement(NavDropdown.Item, {\n    onClick: () => setShowModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Take Attendence\")), /*#__PURE__*/React.createElement(NavDropdown.Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(NavDropdown.Item, {\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"Logout\")) : /*#__PURE__*/React.createElement(Nav.Link, {\n    onClick: () => navigate('/login'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, \"LOGIN\");\n  let attendenceTable = props.member && props.member.admin && /*#__PURE__*/React.createElement(Table, {\n    size: \"sm\",\n    hover: true,\n    bordered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    style: {\n      color: 'black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, \"Present?\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, members.filter(member => !notHere.includes(member) && member.role !== 'Alumni' && member.role !== 'Inactive').map((member, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: member._id,\n    style: {\n      color: 'black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, member.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-danger\",\n    onClick: () => handleNotHere(member, index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, \"Not Here\")))))); // NOTE: href is used for in-page jumps, onClick navigate is for page changes\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    id: \"override\",\n    collapseOnSelect: true,\n    expand: \"lg\",\n    variant: \"dark\",\n    fixed: \"top\",\n    style: navStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n    onClick: () => navigate('/'),\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"Kappa Theta Pi Logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Navbar.Toggle, {\n    \"aria-controls\": \"ktp-nav-collapse\",\n    style: {\n      padding: '4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n    id: \"ktp-nav-collapse\",\n    className: \"justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav, {\n    activeKey: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Item, {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/#rush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"RUSH\")), /*#__PURE__*/React.createElement(Nav.Item, {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/#mission\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, \"MISSION\")), /*#__PURE__*/React.createElement(Nav.Item, {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    href: \"/#contact\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, \"CONTACT\")), /*#__PURE__*/React.createElement(Nav.Item, {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    onClick: () => navigate('/members'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, \"MEMBERS\")), /*#__PURE__*/React.createElement(Nav.Item, {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: dividerStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Nav.Item, {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, authContent)))), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onHide: handleClose,\n    style: {\n      color: 'black'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"Attendence\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, attendenceTable), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    style: {\n      marginRight: 8\n    },\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, \"Confirm\"))));\n}\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  member: state.auth.member\n});\n\nconst mapDispatchToProps = dispatch => ({\n  logout: () => dispatch(actions.logout())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(KTPHeader));","map":{"version":3,"sources":["E:/Webpage/KTP/ktp-react/src/views/layouts/KTPHeader.js"],"names":["React","useState","useEffect","withRouter","connect","Button","Modal","Nav","Navbar","NavDropdown","Table","Api","actions","logo","KTPHeader","props","bg","setBg","members","setMembers","notHere","setNotHere","reloadMembers","setReloadMembers","showModal","setShowModal","navStyle","backgroundColor","dividerStyle","height","width","borderLeft","isAuthenticated","getMembers","then","data","document","addEventListener","window","scrollY","handleLogout","logout","history","push","handleClose","handleSubmit","payload","absent","sendAttendence","result","handleNotHere","member","index","membersNotHere","_id","members_update","splice","navigate","path","authContent","name","toUpperCase","email","split","admin","attendenceTable","color","filter","includes","role","map","cursor","padding","marginRight","mapStateToProps","state","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["// Packages\r\nimport React, { useState, useEffect } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport { connect } from 'react-redux';\r\n\r\n// React Bootstrap\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport NavDropdown from 'react-bootstrap/NavDropdown';\r\nimport Table from 'react-bootstrap/Table';\r\n\r\n// Custom\r\nimport Api from '../../services/KTPApi';\r\nimport actions from '../../redux/auth/actions';\r\nimport logo from '../../img/KtpNavLogo.png';\r\nimport '../../styles/Header.css';\r\n\r\nfunction KTPHeader(props) {\r\n  const [bg, setBg] = useState('transparent');\r\n  const [members, setMembers] = useState([]);\r\n  const [notHere, setNotHere] = useState([]);\r\n  const [reloadMembers, setReloadMembers] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const navStyle = { backgroundColor: bg };\r\n  const dividerStyle = {\r\n    height: '100%',\r\n    width: 2,\r\n    borderLeft: '1px solid white',\r\n  };\r\n\r\n  useEffect(() => {\r\n    // call api to get members\r\n    if (props.isAuthenticated && reloadMembers) {\r\n      Api.getMembers()\r\n        .then(data => {\r\n          setMembers(data.members);\r\n          setReloadMembers(false);\r\n        });\r\n    }\r\n\r\n    document.addEventListener('scroll', () => {\r\n      setBg(window.scrollY < 75 ? 'transparent' : '#154360');\r\n    })\r\n  }, [props.isAuthenticated, reloadMembers]);\r\n\r\n  const handleLogout = () => {\r\n    props.logout();\r\n    props.history.push('/');\r\n  }\r\n\r\n  const handleClose = () => {\r\n    // Close Modal and Reset Data\r\n    setShowModal(false);\r\n    setNotHere([]);\r\n    setReloadMembers(true);\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    let payload = { absent: notHere };\r\n    Api.sendAttendence(payload)\r\n      .then(data => {\r\n        if (data.result === 'success') {\r\n          handleClose();\r\n        }\r\n      });\r\n  }\r\n\r\n  const handleNotHere = (member, index) => {\r\n    // Add Member To Not Here List\r\n    let membersNotHere = [ ...notHere, member._id ];\r\n    setNotHere(membersNotHere);\r\n\r\n    // Remove Member From Attendence List\r\n    let members_update = [ ...members ];\r\n    members_update.splice(index, 1);\r\n    setMembers(members_update);\r\n  }\r\n\r\n  const navigate = path => {\r\n    props.history.push(path);\r\n  }\r\n\r\n  let authContent = props.isAuthenticated && props.member ? (\r\n    <NavDropdown title={props.member.name.toUpperCase()}>\r\n      <NavDropdown.Item onClick={() => navigate(`/profile/${props.member.email.split('@')[0]}`)}>My Profile</NavDropdown.Item>\r\n      <NavDropdown.Item onClick={() => navigate('/points')}>View/Log Points</NavDropdown.Item>\r\n      {props.member.admin && (\r\n        <div>\r\n          <NavDropdown.Item onClick={() => navigate('/edit-members')}>Edit Members</NavDropdown.Item>\r\n          <NavDropdown.Item onClick={() => setShowModal(true)}>Take Attendence</NavDropdown.Item>\r\n        </div>\r\n      )}\r\n      <NavDropdown.Divider />\r\n      <NavDropdown.Item onClick={handleLogout}>Logout</NavDropdown.Item>\r\n    </NavDropdown>\r\n  ) : (\r\n    <Nav.Link onClick={() => navigate('/login')}>LOGIN</Nav.Link>\r\n  );\r\n\r\n  let attendenceTable = props.member && props.member.admin && (\r\n    <Table size=\"sm\" hover bordered>\r\n      <thead>\r\n        <tr style={{ color: 'black' }}>\r\n          <th>Name</th>\r\n          <th>Present?</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {members.filter(member => !notHere.includes(member) && member.role !== 'Alumni' && member.role !== 'Inactive')\r\n          .map((member, index) => (\r\n            <tr key={member._id} style={{ color: 'black' }}>\r\n              <td>{ member.name }</td>\r\n              <td>\r\n                <Button variant='outline-danger' onClick={() => handleNotHere(member, index)}>Not Here</Button>\r\n              </td>\r\n            </tr> \r\n          )\r\n        )}\r\n      </tbody>\r\n    </Table>\r\n  );\r\n\r\n  // NOTE: href is used for in-page jumps, onClick navigate is for page changes\r\n  return (\r\n    <>\r\n      <Navbar id='override' collapseOnSelect expand='lg' variant='dark' fixed='top' style={navStyle}>\r\n        <Navbar.Brand onClick={() => navigate('/')} style={{ cursor: 'pointer' }}>\r\n          <img src={logo} alt='Kappa Theta Pi Logo' />\r\n        </Navbar.Brand>\r\n        <Navbar.Toggle aria-controls='ktp-nav-collapse' style={{ padding: '4px' }}/>\r\n        <Navbar.Collapse id='ktp-nav-collapse' className='justify-content-end'>\r\n          <Nav activeKey='/'>\r\n            <Nav.Item className='nav-item'>\r\n              <Nav.Link href='/#rush'>RUSH</Nav.Link>\r\n            </Nav.Item>\r\n            <Nav.Item className='nav-item'>\r\n              <Nav.Link href='/#mission'>MISSION</Nav.Link>\r\n            </Nav.Item>\r\n            <Nav.Item className='nav-item'>\r\n              <Nav.Link href='/#contact'>CONTACT</Nav.Link>\r\n            </Nav.Item>\r\n            <Nav.Item className='nav-item'>\r\n              <Nav.Link onClick={() => navigate('/members')}>MEMBERS</Nav.Link>\r\n            </Nav.Item>\r\n            <Nav.Item className='nav-item'>\r\n              <div style={dividerStyle}></div>\r\n            </Nav.Item>\r\n            <Nav.Item className='nav-item'>\r\n              {authContent}\r\n            </Nav.Item>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n      <Modal show={showModal} onHide={handleClose} style={{ color: 'black' }}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Attendence</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {attendenceTable}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant='outline-secondary' style={{ marginRight: 8 }} onClick={handleClose}>Close</Button>\r\n          <Button type='submit' onClick={handleSubmit}>Confirm</Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  member: state.auth.member,\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  logout: () => dispatch(actions.logout()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(KTPHeader));"]},"metadata":{},"sourceType":"module"}
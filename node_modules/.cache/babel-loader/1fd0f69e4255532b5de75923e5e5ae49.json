{"ast":null,"code":"var _jsxFileName = \"E:\\\\Webpage\\\\KTP\\\\ktp-react\\\\src\\\\views\\\\components\\\\Academics.js\";\n// Packages\nimport React, { useState } from 'react';\nimport { withRouter } from 'react-router';\nimport { connect } from 'react-redux'; // Bootstrap\n\nimport Accordion from 'react-bootstrap/Accordion';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Modal from 'react-bootstrap/Modal';\nimport Row from 'react-bootstrap/Row'; // Custom\n\nimport Api from '../../services/KTPApi';\nimport actions from '../../redux/auth/actions';\nimport toastActions from '../../redux/toast/actions';\n\nfunction Academics(props) {\n  // Component State and Constants\n  const id = props.match.params.id;\n  const [showModal, setShowModal] = useState(false);\n  const [coursesToAdd, setCoursesToAdd] = useState('');\n  const [coursesToRemove, setCoursesToRemove] = useState(''); // Filters courses to only include ones that are in the given category\n\n  const coursesByCat = category => {\n    return props.courses.filter(course => course.split(' ')[0] === category).map((course, index) => /*#__PURE__*/React.createElement(\"p\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 31\n      }\n    }, course));\n  }; // Submits the Add Courses Form\n\n\n  const addCourses = () => {\n    // Convert coursesToAdd to an Array\n    let courseList = coursesToAdd.split(', '); // Construct Payload Object\n\n    let payload = {\n      updates: {\n        courses: [...props.member.courses, ...courseList]\n      }\n    }; // Call API to update the current member\n\n    Api.updateMember(props.member._id, payload).then(data => {\n      if (data.success) {\n        // Update Redux State\n        props.loadMember(props.member._id);\n        props.showToast('success', 'Course(s) Added');\n      } else {\n        props.showToast('error', data.error);\n      }\n    });\n  }; // Submits the Remove Courses Form\n\n\n  const removeCourses = () => {\n    // Convert coursesToRemove to an Array\n    let courseList = coursesToRemove.split(', '); // Remove selected courses\n\n    let courses = props.member.courses.filter(course => !courseList.includes(course)); // Construct Payload Object\n\n    let payload = {\n      updates: {\n        courses\n      }\n    }; // Calls API to update the current member\n\n    Api.updateMember(props.member._id, payload).then(data => {\n      if (data.success) {\n        // Update Redux State\n        props.loadMember(props.member._id);\n        props.showToast('success', 'Course(s) Removed');\n      } else {\n        props.showToast('error', data.error);\n      }\n    });\n  }; // Generate a Accordion List for each course category\n\n\n  let courseAccordion = props.courseCats.map((category, index) => /*#__PURE__*/React.createElement(Card, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Accordion.Toggle, {\n    as: Card.Header,\n    eventKey: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, category, \" \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-caret-down\",\n    style: {\n      float: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(Accordion.Collapse, {\n    eventKey: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, coursesByCat(category)))));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Col, {\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"acad-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Major: \", props.major)), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 5,\n      offset: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, \"Graduation Semester: \", props.gradSemester))), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      marginTop: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, props.member && props.member.email.split('@')[0] === id && /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      offset: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"ktp-btn\",\n    variant: \"info\",\n    size: \"sm\",\n    onClick: () => setShowModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, \"Edit Courses\"))), /*#__PURE__*/React.createElement(Accordion, {\n    defaultActiveKey: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, courseAccordion)))), /*#__PURE__*/React.createElement(Modal, {\n    show: showModal,\n    onHide: () => setShowModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"Edit Course\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, \"Use the format: \\\"[Course Department] [4 Digit Course Number]\\\", and separate courses with \\\", \\\"\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"addCourses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"Add Course(s):\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    onChange: e => setCoursesToAdd(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-success\",\n    onClick: addCourses,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Add\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"removeCourses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, \"Remove Course(s):\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    onChange: e => setCoursesToRemove(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-danger\",\n    onClick: removeCourses,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, \"Remove\"))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    onClick: () => setShowModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, \"Close\"))));\n} // Maps Redux State to Component Props\n\n\nconst mapStateToProps = state => ({\n  member: state.auth.member\n}); // Maps Redux Action Creators to Component Prop Functions\n\n\nconst mapDispatchToProps = dispatch => ({\n  loadMember: id => dispatch(actions.loadMember(id)),\n  showToast: (type, msg) => dispatch(toastActions.show(type, msg))\n}); // Connects Redux and Redux Mappings to Component\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Academics));","map":{"version":3,"sources":["E:/Webpage/KTP/ktp-react/src/views/components/Academics.js"],"names":["React","useState","withRouter","connect","Accordion","Button","Card","Col","Form","Modal","Row","Api","actions","toastActions","Academics","props","id","match","params","showModal","setShowModal","coursesToAdd","setCoursesToAdd","coursesToRemove","setCoursesToRemove","coursesByCat","category","courses","filter","course","split","map","index","addCourses","courseList","payload","updates","member","updateMember","_id","then","data","success","loadMember","showToast","error","removeCourses","includes","courseAccordion","courseCats","Header","float","major","span","offset","gradSemester","marginTop","email","e","target","value","mapStateToProps","state","auth","mapDispatchToProps","dispatch","type","msg","show"],"mappings":"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","sourcesContent":["// Packages\r\nimport React, { useState } from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport { connect } from 'react-redux';\r\n\r\n// Bootstrap\r\nimport Accordion from 'react-bootstrap/Accordion';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Row from 'react-bootstrap/Row';\r\n\r\n// Custom\r\nimport Api from '../../services/KTPApi';\r\nimport actions from '../../redux/auth/actions';\r\nimport toastActions from '../../redux/toast/actions';\r\n\r\nfunction Academics(props) {\r\n  // Component State and Constants\r\n  const id = props.match.params.id;\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [coursesToAdd, setCoursesToAdd] = useState('');\r\n  const [coursesToRemove, setCoursesToRemove] = useState('');\r\n\r\n  // Filters courses to only include ones that are in the given category\r\n  const coursesByCat = category => {\r\n    return props.courses.filter(course => course.split(' ')[0] === category)\r\n      .map((course, index) => <p key={index}>{ course }</p>);\r\n  }\r\n\r\n  // Submits the Add Courses Form\r\n  const addCourses = () => {\r\n    // Convert coursesToAdd to an Array\r\n    let courseList = coursesToAdd.split(', ');\r\n    \r\n    // Construct Payload Object\r\n    let payload = {\r\n      updates: { courses: [ ...props.member.courses, ...courseList ] },\r\n    };\r\n\r\n    // Call API to update the current member\r\n    Api.updateMember(props.member._id, payload)\r\n      .then(data => {\r\n        if (data.success) {\r\n          // Update Redux State\r\n          props.loadMember(props.member._id);\r\n          props.showToast('success', 'Course(s) Added');\r\n        } else {\r\n          props.showToast('error', data.error);\r\n        }\r\n      });\r\n  }\r\n\r\n  // Submits the Remove Courses Form\r\n  const removeCourses = () => {\r\n    // Convert coursesToRemove to an Array\r\n    let courseList = coursesToRemove.split(', ');\r\n    \r\n    // Remove selected courses\r\n    let courses = props.member.courses.filter(course => !courseList.includes(course));\r\n\r\n    // Construct Payload Object\r\n    let payload = {\r\n      updates: { courses },\r\n    };\r\n\r\n    // Calls API to update the current member\r\n    Api.updateMember(props.member._id, payload)\r\n      .then(data => {\r\n        if (data.success) {\r\n          // Update Redux State\r\n          props.loadMember(props.member._id);\r\n          props.showToast('success', 'Course(s) Removed');\r\n        } else {\r\n          props.showToast('error', data.error);\r\n        }\r\n      });\r\n  }\r\n\r\n  // Generate a Accordion List for each course category\r\n  let courseAccordion = props.courseCats.map((category, index) => (\r\n    <Card key={index}>\r\n      <Accordion.Toggle as={Card.Header} eventKey={index}>\r\n        { category } <i className='fa fa-caret-down' style={{ float: 'right' }}></i>\r\n      </Accordion.Toggle>\r\n      <Accordion.Collapse eventKey={index}>\r\n        <Card.Body>{ coursesByCat(category) }</Card.Body>\r\n      </Accordion.Collapse>\r\n    </Card>\r\n  ));\r\n\r\n  return (\r\n    <>\r\n      <Col lg={12}>\r\n        <Row className='acad-content'>\r\n          <Col lg={5}>\r\n            <span>Major: { props.major }</span>\r\n          </Col>\r\n          <Col lg={{ span: 5, offset: 2 }}>\r\n            <span>Graduation Semester: { props.gradSemester }</span>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: 15 }}>\r\n          <Col lg={6}>\r\n            {props.member && props.member.email.split('@')[0] === id && (\r\n              <Row>\r\n                <Col lg={{ offset: 3 }}>\r\n                  <Button\r\n                    className='ktp-btn'\r\n                    variant='info'\r\n                    size='sm'\r\n                    onClick={() => setShowModal(true)}\r\n                  >\r\n                    Edit Courses\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n            <Accordion defaultActiveKey='0'>\r\n              { courseAccordion }\r\n            </Accordion>\r\n          </Col>\r\n        </Row>\r\n      </Col>\r\n      <Modal show={showModal} onHide={() => setShowModal(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Edit Course</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <span>Use the format: \"[Course Department] [4 Digit Course Number]\", and separate courses with \", \"</span>\r\n          <Form>\r\n            <Form.Group controlId='addCourses'>\r\n              <Form.Label>Add Course(s):</Form.Label>\r\n              <Form.Control type='text' onChange={e => setCoursesToAdd(e.target.value)} />\r\n            </Form.Group>\r\n            <Button variant='outline-success' onClick={addCourses}>Add</Button>\r\n          </Form>\r\n          <br />\r\n          <Form>\r\n            <Form.Group controlId='removeCourses'>\r\n              <Form.Label>Remove Course(s):</Form.Label>\r\n              <Form.Control type='text' onChange={e => setCoursesToRemove(e.target.value)} />\r\n            </Form.Group>\r\n            <Button variant='outline-danger' onClick={removeCourses}>Remove</Button>\r\n          </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant='outline-secondary' onClick={() => setShowModal(false)}>Close</Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\n// Maps Redux State to Component Props\r\nconst mapStateToProps = state => ({\r\n  member: state.auth.member,\r\n});\r\n\r\n// Maps Redux Action Creators to Component Prop Functions\r\nconst mapDispatchToProps = dispatch => ({\r\n  loadMember: id => dispatch(actions.loadMember(id)),\r\n  showToast: (type, msg) => dispatch(toastActions.show(type, msg)),\r\n});\r\n\r\n// Connects Redux and Redux Mappings to Component\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Academics));"]},"metadata":{},"sourceType":"module"}